"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4890],{4890:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var n=r(5155),i=r(2115),l=r(2539);r(682);var o=r(6122);let d=[18,42,74,102,146,188,224,258,296,334],a={minNodeWidth:280,maxNodeWidth:700,horizontalMargin:84,siblingGap:40,fontCharWidth:8.4,lineHeightPx:20.5,paddingX:14,paddingY:12};function c(e,t){var r,n;let i=String(e||"").trim()||"Untitled",l=(r=Math.round(i.length*t.fontCharWidth+2*t.paddingX+96),n=t.minNodeWidth,Math.min(t.maxNodeWidth,Math.max(n,r))),o=Math.max(8,Math.floor(Math.max(l-2*t.paddingX,80)/t.fontCharWidth)),d=Math.max(1,Math.ceil(i.length/o));return{width:l,height:Math.max(44,Math.round(2*t.paddingY+d*t.lineHeightPx)),charsPerLine:o,lineCount:d}}function s(e,t,r){if(0===t||r<0)return"dark"===e?{bg:"#4a5d79",bgAlt:"#3d4f69",border:"#93a8c8",text:"#f6f8fc",edge:"#93a8c8",shadow:"0 18px 28px -22px rgba(6,10,18,0.82)"}:{bg:"#f5efe3",bgAlt:"#e9dcc4",border:"#b29a73",text:"#352917",edge:"#b29a73",shadow:"0 18px 28px -22px rgba(74,57,34,0.46)"};let n=d[Math.abs(r)%d.length];if("dark"===e){let e=t<=1?28:23;return{bg:"hsl(".concat(n," 45% ").concat(e,"%)"),bgAlt:"hsl(".concat(n," 40% ").concat(Math.max(e-5,18),"%)"),border:"hsl(".concat(n," 52% 60%)"),text:"#f6f8fc",edge:"hsl(".concat(n," 56% 62%)"),shadow:"0 16px 24px -20px rgba(4,8,14,0.82)"}}let i=t<=1?87:92;return{bg:"hsl(".concat(n," 92% ").concat(i,"%)"),bgAlt:"hsl(".concat(n," 84% ").concat(Math.max(i-6,70),"%)"),border:"hsl(".concat(n," 58% 46%)"),text:"hsl(".concat(n," 38% 20%)"),edge:"hsl(".concat(n," 54% 45%)"),shadow:"0 16px 24px -20px rgba(74,57,34,0.44)"}}function h(e,t,r){let n=e.get(t);n&&(n.side=r,n.children.forEach(t=>h(e,t,r)))}function u(){return(0,n.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,n.jsx)("path",{d:"M4 9V4H9",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M15 4H20V9",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M20 15V20H15",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M9 20H4V15",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M8 8L16 16",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M16 8L8 16",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round"})]})}function g(e){let{exit:t}=e;return t?(0,n.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,n.jsx)("path",{d:"M9 9V4H4",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M15 9V4H20",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M9 15V20H4",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M15 15V20H20",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]}):(0,n.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,n.jsx)("path",{d:"M4 9V4H9",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M20 9V4H15",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M4 15V20H9",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M20 15V20H15",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})}function p(e){let{nodes:t,edges:r,themeMode:o,containerRef:d}=e,{fitView:a}=(0,l.VH)(),[c,s]=(0,i.useState)(!1),h=(0,i.useCallback)(()=>{a({padding:.24,duration:760,minZoom:.06})},[a]),p=(0,i.useCallback)(async()=>{if("undefined"==typeof document)return;let e=d.current;if(e)try{if(document.fullscreenElement===e)return void await document.exitFullscreen();document.fullscreenElement&&await document.exitFullscreen(),await e.requestFullscreen()}catch(e){console.error("[MindMap] Fullscreen toggle failed:",e)}},[d]);return(0,i.useEffect)(()=>{let e=setTimeout(()=>{h()},20);return()=>clearTimeout(e)},[r,h,t]),(0,i.useEffect)(()=>{if("undefined"==typeof document)return;let e=()=>{s(document.fullscreenElement===d.current),setTimeout(()=>{h()},40)};return document.addEventListener("fullscreenchange",e),e(),()=>{document.removeEventListener("fullscreenchange",e)}},[d,h]),(0,n.jsxs)(l.Gc,{nodes:t,edges:r,fitView:!0,minZoom:.06,maxZoom:2.1,defaultEdgeOptions:{type:"bezier"},panOnScroll:!0,zoomOnScroll:!0,proOptions:{hideAttribution:!0},children:[(0,n.jsx)(l.VS,{gap:20,size:1.1,color:"dark"===o?"rgba(140,160,190,0.22)":"rgba(114,143,130,0.22)"}),(0,n.jsx)(l.H2,{showFitView:!1,showInteractive:!1,style:{border:"1px solid ".concat("dark"===o?"#3a4657":"#d8ccb8"),background:"dark"===o?"#1a2330":"#fffaf2"},children:(0,n.jsx)(l.aV,{onClick:h,title:"Fit View","aria-label":"Fit View",children:(0,n.jsx)(u,{})})}),(0,n.jsx)(l.Zk,{position:"top-right",children:(0,n.jsxs)("button",{type:"button",onClick:()=>void p(),"aria-label":c?"Exit Fullscreen":"Enter Fullscreen",className:"mindmap-fullscreen-btn ".concat("dark"===o?"mindmap-fullscreen-btn-dark":"mindmap-fullscreen-btn-light"),children:[(0,n.jsx)(g,{exit:c}),(0,n.jsx)("span",{children:c?"Exit Full Screen":"Full Screen"})]})})]})}function f(e){let{data:t,themeMode:r}=e,d=(0,i.useMemo)(()=>(function(e,t,r){let n,i,l={...a},{rootId:d,descriptorMap:u}=function(e){let t=0,r=new Map,n=(e,i,l,o,d)=>{let a="mind-node-".concat(t++),c={id:a,label:String(e.label||"").trim()||"Untitled",depth:i,parentId:l,side:o,branchIndex:d,children:[]};if(r.set(a,c),l){let e=r.get(l);e&&e.children.push(a)}return(Array.isArray(e.children)?e.children:[]).forEach((e,t)=>{n(e,i+1,a,o,0===i?t:d)}),a};return{rootId:n(e.root,0,null,"center",-1),descriptorMap:r}}(e),g=u.get(d);if(!g)return{nodes:[],edges:[]};let p=Array.from(u.values()),f=new Map;p.forEach(e=>{f.set(e.id,c(e.label,l))});let x=new Map;!function e(t,r,n,i,l){var o;let d=l.get(i);if("number"==typeof d)return d;let a=t.get(i);if(!a)return 0;let c=r.get(i),s=null!=(o=null==c?void 0:c.height)?o:0;if(0===a.children.length)return l.set(i,s),s;let h=0;a.children.forEach((i,o)=>{let d=e(t,r,n,i,l);h+=d,o<a.children.length-1&&(h+=n.siblingGap)});let u=Math.max(s,h);return l.set(i,u),u}(u,f,l,d,x),n=0,i=0,g.children.forEach(e=>{var t;let r=null!=(t=x.get(e))?t:0;i<=n?(h(u,e,"right"),i+=r):(h(u,e,"left"),n+=r)});let k=function(e,t,r,n,i,l){let o=new Map;o.set(e,{x:0,y:0});let d=(e,r)=>{var a,c;let s=t.get(e);if(!s)return;let h=null!=(a=n.get(e))?a:0,u=null!=(c=i[s.depth])?c:0,g="left"===s.side?-u:"right"===s.side?u:0;if(o.set(e,{x:g,y:r+h/2}),0===s.children.length)return;let p=r+(h-s.children.reduce((e,t,r)=>{var i;return e+(null!=(i=n.get(t))?i:0)+(r<s.children.length-1?l.siblingGap:0)},0))/2;s.children.forEach(e=>{var t;let r=null!=(t=n.get(e))?t:0;d(e,p),p+=r+l.siblingGap})},a=r=>{let i=t.get(e);if(!i)return;let o=i.children.filter(e=>{var n;return(null==(n=t.get(e))?void 0:n.side)===r});if(0===o.length)return;let a=-o.reduce((e,t,r)=>{var i;return e+(null!=(i=n.get(t))?i:0)+(r<o.length-1?l.siblingGap:0)},0)/2;o.forEach(e=>{var t;let r=null!=(t=n.get(e))?t:0;d(e,a),a+=r+l.siblingGap})};return a("left"),a("right"),o}(d,u,0,x,function(e,t,r){var n,i,l,o,d;let a=new Map;for(let o of e){let e=null!=(i=null==(n=t.get(o.id))?void 0:n.width)?i:r.minNodeWidth;e>(null!=(l=a.get(o.depth))?l:0)&&a.set(o.depth,e)}let c=e.reduce((e,t)=>Math.max(e,t.depth),0),s=Array(c+1).fill(0);for(let e=1;e<=c;e+=1){let t=null!=(o=a.get(e-1))?o:r.minNodeWidth,n=null!=(d=a.get(e))?d:r.minNodeWidth;s[e]=s[e-1]+t/2+n/2+r.horizontalMargin}return s}(p,f,l),l);return{nodes:p.map(e=>{let r=s(t,e.depth,e.branchIndex),n=f.get(e.id)||c(e.label,l);return{id:e.id,data:{label:e.label},position:k.get(e.id)||{x:0,y:0},sourcePosition:"center"===e.side?void 0:"left"===e.side?o.yX.Left:o.yX.Right,targetPosition:"center"===e.side?void 0:"left"===e.side?o.yX.Right:o.yX.Left,draggable:!0,style:{width:n.width,height:n.height,borderRadius:16,border:"1px solid ".concat(r.border),background:"linear-gradient(145deg, ".concat(r.bg," 0%, ").concat(r.bgAlt," 100%)"),color:r.text,boxShadow:r.shadow,fontSize:14,fontWeight:0===e.depth?700:600,lineHeight:1.46,padding:"12px 14px",textAlign:0===e.depth?"center":"left",whiteSpace:"normal",wordBreak:"break-word"}}}),edges:p.filter(e=>!!e.parentId).map(e=>({id:"mind-edge-".concat(e.parentId,"-").concat(e.id),source:e.parentId,target:e.id,type:"bezier",animated:!0,markerEnd:{type:o.TG.ArrowClosed,width:20,height:20},style:{strokeWidth:2.1,stroke:s(t,e.depth,e.branchIndex).edge}}))}})(t,r),[t,r]),u=(0,i.useRef)(null);return(0,n.jsx)("div",{ref:u,className:"h-full w-full mindmap-canvas rounded-2xl overflow-hidden",children:(0,n.jsx)(l.Ln,{children:(0,n.jsx)(p,{nodes:d.nodes,edges:d.edges,themeMode:r,containerRef:u})})})}}}]);