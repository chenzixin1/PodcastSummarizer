"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{30:(e,r,t)=>{t.r(r),t.d(r,{default:()=>d});var a=t(5155),s=t(2115),l=t(2619),o=t.n(l),n=t(5239),i=t(4481),c=t(6344);function d(){let[e,r]=(0,s.useState)([]),[t,l]=(0,s.useState)(!0),[d,m]=(0,s.useState)(null),[u,p]=(0,s.useState)(""),[x,h]=(0,s.useState)("light");(0,s.useEffect)(()=>{!async function(){l(!0),m(null);try{let e=await fetch("/api/podcasts?page=1&pageSize=50");if(!e.ok)throw Error("Failed to fetch public podcast list");let t=(await e.json()).data.map(e=>{var r,t;let a=("string"==typeof e.title?e.title.trim():"")||(0,i.j)(String(e.originalFileName||"")),s=(0,c.S)(e.tags),l=(0,c.z)({title:a,sourceReference:e.sourceReference||null,fallbackName:e.originalFileName||null});return{id:e.id,name:a,briefSummary:(t=e.briefSummary,"string"!=typeof t?null:t.replace(/#\s*English Summary/gi," ").replace(/#\s*中文总结/g," ").replace(/```[\s\S]*?```/g," ").replace(/`([^`]+)`/g,"$1").replace(/\[([^\]]+)\]\([^)]*\)/g,"$1").replace(/^#{1,6}\s*/gm,"").replace(/^\s*[-*+]\s+/gm,"").replace(/[*_~>#]/g," ").replace(/\s+/g," ").trim()||null),uploadDate:e.createdAt,processed:e.isProcessed,processedAt:e.processedAt,isPublic:e.isPublic||!1,sourceReference:e.sourceReference||null,wordCount:"number"==typeof e.wordCount?e.wordCount:null,durationSec:"number"==typeof e.durationSec?e.durationSec:(r="number"==typeof e.wordCount?e.wordCount:null,"number"!=typeof r||!Number.isFinite(r)||r<=0?null:Math.max(60,Math.round(r/155*60))),tags:s.length>0?s:l}});r(t)}catch(e){m(e instanceof Error?e.message:"Failed to load files")}finally{l(!1)}}()},[]),(0,s.useEffect)(()=>{let e=window.localStorage.getItem("podsum-dashboard-theme");if("light"===e||"dark"===e)return void h(e);h(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},[]),(0,s.useEffect)(()=>{window.localStorage.setItem("podsum-dashboard-theme",x)},[x]);let b=(0,s.useMemo)(()=>u.trim().replace(/^#/,"").toLowerCase(),[u]),f=(0,s.useMemo)(()=>b?e.filter(e=>{let r=e.name.toLowerCase().includes(b),t=e.tags.some(e=>e.toLowerCase().includes(b));return r||t}):e,[e,b]),g=(0,s.useMemo)(()=>{let r=new Set;for(let t of e)for(let e of t.tags)r.add(e);return Array.from(r).slice(0,18)},[e]);return(0,a.jsxs)("div",{className:"dashboard-shell min-h-screen text-[var(--text-main)] flex flex-col","data-theme":x,children:[(0,a.jsx)("header",{className:"sticky top-0 z-20 border-b border-[var(--border-soft)] bg-[var(--header-bg)] backdrop-blur-xl",children:(0,a.jsxs)("div",{className:"mx-auto w-full max-w-[1400px] px-4 sm:px-6 lg:px-8 py-4 flex flex-col gap-3 md:flex-row md:justify-between md:items-center",children:[(0,a.jsxs)("nav",{className:"app-breadcrumb-nav",children:[(0,a.jsxs)(o(),{href:"/",className:"app-breadcrumb-link",children:[(0,a.jsx)(n.default,{src:"/podcast-summarizer-icon.svg",alt:"PodSum logo",width:28,height:28}),(0,a.jsx)("span",{children:"PodSum.cc"})]}),(0,a.jsx)("span",{className:"app-breadcrumb-divider",children:"/"}),(0,a.jsx)("span",{className:"app-breadcrumb-current",children:"Public Podcast Summary"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap",children:[(0,a.jsxs)("div",{className:"inline-flex items-center rounded-lg border border-[var(--border-soft)] bg-[var(--paper-base)] p-0.5",children:[(0,a.jsx)("button",{onClick:()=>h("light"),className:"px-2.5 py-1.5 text-xs rounded-md transition-colors ".concat("light"===x?"bg-[var(--btn-primary)] text-[var(--btn-primary-text)]":"text-[var(--text-secondary)] hover:bg-[var(--paper-muted)]"),children:"Light Mode"}),(0,a.jsx)("button",{onClick:()=>h("dark"),className:"px-2.5 py-1.5 text-xs rounded-md transition-colors ".concat("dark"===x?"bg-[var(--btn-primary)] text-[var(--btn-primary-text)]":"text-[var(--text-secondary)] hover:bg-[var(--paper-muted)]"),children:"Dark Mode"})]}),(0,a.jsx)(o(),{href:"/my",className:"bg-[var(--paper-base)] hover:bg-[var(--paper-muted)] border border-[var(--border-soft)] text-[var(--text-secondary)] text-sm font-medium py-2 px-4 sm:px-6 rounded-lg transition-colors",children:"My Summaries"}),(0,a.jsx)(o(),{href:"/upload",className:"bg-[var(--btn-primary)] hover:bg-[var(--btn-primary-hover)] text-[var(--btn-primary-text)] text-sm font-medium py-2 px-4 sm:px-6 rounded-lg transition-colors",children:"+ Upload SRT"})]})]})}),(0,a.jsx)("main",{className:"container mx-auto w-full max-w-[1400px] p-4 sm:p-6 lg:p-8 flex-grow",children:(0,a.jsxs)("div",{className:"dashboard-panel rounded-2xl p-5 sm:p-6 lg:p-8",children:[(0,a.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Search keyword or #tag",className:"w-full bg-transparent border-0 border-b border-[var(--border-soft)] px-0 py-2 text-sm text-[var(--text-main)] placeholder:text-[var(--text-muted)] focus:outline-none focus:border-[var(--border-medium)]"}),!t&&(0,a.jsxs)("span",{className:"shrink-0 text-xs text-[var(--text-muted)]",children:[f.length,"/",e.length]})]}),g.length>0&&(0,a.jsx)("div",{className:"overflow-x-auto whitespace-nowrap [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden text-xs text-[var(--text-muted)]",children:g.slice(0,14).map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>p("#".concat(e)),className:"mr-3 inline-flex hover:text-[var(--heading)] transition-colors ".concat(b&&e.toLowerCase().includes(b)?"text-[var(--heading)] underline underline-offset-2":""),children:["#",e]},e))})]}),d&&(0,a.jsxs)("div",{className:"border border-[#d8b7b7] bg-[#fff5f5] text-[var(--danger)] p-4 rounded-xl mb-6",children:[(0,a.jsx)("p",{className:"font-medium",children:"Error loading data"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:d})]}),t?(0,a.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-[var(--border-medium)] border-t-[var(--btn-primary)]"})}):0===e.length?(0,a.jsx)("div",{className:"bg-[var(--paper-subtle)] border border-[var(--border-soft)] rounded-xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-[var(--text-muted)] mb-4",children:"No public podcast summaries available."})}):0===f.length?(0,a.jsx)("div",{className:"bg-[var(--paper-subtle)] border border-[var(--border-soft)] rounded-xl p-8 text-center",children:(0,a.jsxs)("p",{className:"text-[var(--text-muted)]",children:['No results for "',u.trim(),'".']})}):(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:f.map(e=>(0,a.jsx)("div",{className:"bg-[var(--paper-base)] border border-[var(--border-soft)] rounded-xl p-4 hover:bg-[var(--paper-muted)] transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)(o(),{href:"/dashboard/".concat(e.id),className:"block",children:(0,a.jsx)("h3",{className:"font-semibold text-[var(--heading)] mb-2 whitespace-normal break-words leading-8",title:e.name,children:e.name})}),(0,a.jsx)("p",{className:"mb-2.5 text-sm leading-6 text-[var(--text-secondary)] whitespace-pre-wrap break-words",children:e.briefSummary||(e.processed?"暂无摘要。":"摘要生成中...")}),(0,a.jsxs)("div",{className:"flex gap-3 text-xs text-[var(--text-muted)] flex-wrap",children:[(0,a.jsxs)("span",{children:["Duration: ",function(e){if("number"!=typeof e||!Number.isFinite(e)||e<=0)return"Unknown";let r=Math.max(1,Math.round(e)),t=Math.floor(r/3600),a=Math.floor(r%3600/60);return t>0?"".concat(t,"h ").concat(String(a).padStart(2,"0"),"m"):"".concat(Math.max(1,a),"m")}(e.durationSec)]}),e.isPublic&&(0,a.jsx)("span",{className:"text-emerald-600",children:"Public"}),e.processed&&(0,a.jsx)("span",{className:"text-emerald-600",children:"✓ Processed"}),!e.processed&&(0,a.jsx)("span",{className:"text-amber-600",children:"⟳ Processing"})]}),(0,a.jsxs)("div",{className:"text-xs text-[var(--text-muted)] mt-1.5",children:["Uploaded: ",new Date(e.uploadDate).toLocaleString()]}),e.tags.length>0&&(0,a.jsx)("div",{className:"mt-2.5 flex flex-wrap gap-1.5",children:e.tags.map(r=>(0,a.jsxs)("span",{className:"rounded-full border border-[var(--border-soft)] bg-[var(--paper-subtle)] px-2 py-0.5 text-[11px] text-[var(--text-secondary)]",children:["#",r]},"".concat(e.id,"-").concat(r)))})]}),(0,a.jsx)(o(),{href:"/dashboard/".concat(e.id),className:"shrink-0 bg-[var(--paper-subtle)] border border-[var(--border-soft)] text-[var(--text-secondary)] rounded-md px-3 py-1 text-xs hover:bg-[var(--paper-muted)] transition-colors",children:"View"})]})},e.id))})]})}),(0,a.jsx)("footer",{className:"p-4 text-center text-xs text-[var(--text-muted)]",children:"PodSum.cc - Powered by Vercel"})]})}},4481:(e,r,t)=>{t.d(r,{j:()=>a});function a(e){var r;let t="string"!=typeof(r=function(e){let r=e.trim(),t=r.lastIndexOf(".");return t<=0?r:r.slice(0,t)}(e))?null:r.replace(/\s+/g," ").trim()||null;return t||"Transcript"}},6344:(e,r,t)=>{t.d(r,{S:()=>m,z:()=>d});let a=new Set(["the","and","for","with","from","that","this","into","about","over","your","you","are","was","were","will","how","what","why","when","they","them","their","our","ours","its","can","new","all","not","podcast","summary","video","talk","episode","analysis","transcript","public","private","full","text","part","chapter"]),s=new Set(["我们","你们","他们","这个","那个","一些","一个","一种","这样","那么","然后","因为","所以","就是","可以","需要","时候","问题","内容","总结","视频","播客","字幕","重点","分析","翻译"]);function l(e){return e.replace(/\s+/g," ").trim()}function o(e){return l(e).replace(/^#+/,"").replace(/[.,;:!?/\\|()[\]{}'"`]+$/g,"")}function n(e,r,t){let a=o(r);if(!a)return;let s=a.toLowerCase();e.set(s,(e.get(s)||0)+t)}function i(e,r,t,s){for(let l of r.match(/[A-Za-z][A-Za-z0-9+.-]{1,28}/g)||[]){let r=o(l),i=r.toLowerCase();r.length<2||a.has(i)||/^\d+$/.test(r)||(n(e,r,t),s&&!s.has(i)&&s.set(i,r))}}function c(e,r,t,a){for(let l of r.match(/[\u4e00-\u9fff]{2,10}/g)||[]){let r=o(l);if(r.length<2||s.has(r))continue;n(e,r,t);let i=r.toLowerCase();a&&!a.has(i)&&a.set(i,r)}}function d(e){let r=l(String(e.title||e.fallbackName||"")),t=l(String(e.summary||"").replace(/```[\s\S]*?```/g," ").replace(/`[^`]*`/g," ").replace(/!\[[^\]]*]\([^)]*\)/g," ").replace(/\[[^\]]*]\([^)]*\)/g," ").replace(/^#{1,6}\s+/gm,"").replace(/[*_~>#-]/g," ").replace(/\r\n/g,"\n")),a=new Map,s=new Map,d=e=>{let r=o(e);if(!r)return;let t=r.toLowerCase();s.has(t)||s.set(t,r)};for(let r of function(e){let r=String(e||"").toLowerCase(),t=[];return(r.includes("youtube.com")||r.includes("youtu.be"))&&t.push("YouTube"),r.includes("bilibili.com")&&t.push("Bilibili"),(r.includes("x.com")||r.includes("twitter.com"))&&t.push("X"),t}(e.sourceReference))n(a,r,8),d(r);r&&(i(a,r,5,s),c(a,r,5,s)),t&&(i(a,t,1,s),c(a,t,1,s));let m=Array.from(a.entries()).sort((e,r)=>r[1]-e[1]||e[0].localeCompare(r[0])).slice(0,10).map(e=>{let[r]=e;return s.get(r)||r}).map(e=>o(e)).filter(Boolean),u=[],p=new Set;for(let e of m){let r=e.toLowerCase();p.has(r)||(p.add(r),u.push(e))}return u}function m(e){let r=Array.isArray(e)?e:"string"==typeof e?(()=>{try{let r=JSON.parse(e);return Array.isArray(r)?r:[]}catch(r){return e.split(",").map(e=>e.trim()).filter(Boolean)}})():[],t=[],a=new Set;for(let e of r){let r=o(String(e||""));if(!r)continue;let s=r.toLowerCase();if(!a.has(s)&&(a.add(s),t.push(r),t.length>=10))break}return t}}}]);