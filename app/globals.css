@import "tailwindcss";

:root {
  --background: #f3eee3;
  --foreground: #2f2a22;
  --paper-base: #fffdf8;
  --paper-muted: #f8f1e4;
  --paper-subtle: #f5ecdb;
  --header-bg: rgba(248, 243, 234, 0.9);
  --panel-bg: linear-gradient(155deg, rgba(255, 254, 250, 0.97) 0%, rgba(249, 242, 229, 0.96) 100%);
  --panel-shadow: 0 16px 36px -26px rgba(87, 71, 45, 0.4);
  --border-soft: #ddd2bf;
  --border-medium: #cfc1a8;
  --text-main: #2f2a22;
  --text-secondary: #5f5547;
  --text-muted: #8a7a64;
  --heading: #2f6656;
  --heading-soft: #3a6d5c;
  --link: #2f6656;
  --link-hover: #255648;
  --quote-border: #8db6a7;
  --quote-bg: linear-gradient(90deg, rgba(219, 234, 228, 0.85), rgba(219, 234, 228, 0));
  --pre-bg: #f6efe2;
  --pre-border: #d7cbb7;
  --pre-text: #5f4b34;
  --code-bg: #f8f0e1;
  --code-border: #e0d4c0;
  --code-text: #684f2d;
  --table-border: #d8ccb8;
  --table-head-bg: #f6eee0;
  --scroll-track: rgba(191, 173, 140, 0.2);
  --scroll-thumb: rgba(126, 158, 144, 0.58);
  --scroll-thumb-hover: rgba(93, 129, 114, 0.68);
  --accent: #3f7a68;
  --accent-strong: #2f6656;
  --accent-soft: #dbeae4;
  --btn-primary: #3f7a68;
  --btn-primary-hover: #2f6656;
  --btn-primary-text: #ffffff;
  --danger: #a64e4e;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  background:
    radial-gradient(85rem 50rem at 5% -8%, rgba(198, 176, 136, 0.16), transparent 60%),
    radial-gradient(75rem 45rem at 100% -10%, rgba(160, 184, 171, 0.18), transparent 62%),
    var(--background);
  color: var(--foreground);
  font-family: var(--font-geist-sans), "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Noto Sans CJK SC", sans-serif;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  letter-spacing: 0.01em;
  line-height: 1.68;
}

.dashboard-shell {
  background:
    radial-gradient(68rem 40rem at 4% -8%, rgba(198, 176, 136, 0.18), transparent 58%),
    radial-gradient(60rem 36rem at 100% -12%, rgba(163, 183, 173, 0.14), transparent 62%),
    linear-gradient(180deg, #f8f3ea 0%, #f2ebde 100%);
}

.dashboard-shell[data-theme='dark'] {
  --background: #0f1319;
  --foreground: #f3f4f6;
  --paper-base: #131922;
  --paper-muted: #1a222d;
  --paper-subtle: #151d27;
  --header-bg: rgba(12, 18, 27, 0.9);
  --panel-bg: linear-gradient(155deg, rgba(20, 26, 36, 0.98) 0%, rgba(18, 24, 34, 0.98) 100%);
  --panel-shadow: 0 18px 40px -28px rgba(0, 0, 0, 0.7);
  --border-soft: #2b3542;
  --border-medium: #3a4657;
  --text-main: #f6f8fc;
  --text-secondary: #e6e8ec;
  --text-muted: #a8b1be;
  --heading: #ffffff;
  --heading-soft: #f0f2f5;
  --link: #f0f2f6;
  --link-hover: #ffffff;
  --quote-border: #8795a9;
  --quote-bg: linear-gradient(90deg, rgba(95, 108, 129, 0.35), rgba(95, 108, 129, 0));
  --pre-bg: #141d29;
  --pre-border: #2d394a;
  --pre-text: #e9edf4;
  --code-bg: #182231;
  --code-border: #303e52;
  --code-text: #f1f4fa;
  --table-border: #2d394a;
  --table-head-bg: #1a2533;
  --scroll-track: rgba(89, 102, 122, 0.22);
  --scroll-thumb: rgba(138, 154, 178, 0.56);
  --scroll-thumb-hover: rgba(164, 180, 204, 0.7);
  --accent: #d7dce5;
  --accent-strong: #ffffff;
  --accent-soft: rgba(170, 182, 198, 0.2);
  --btn-primary: #4b5a70;
  --btn-primary-hover: #5b6d87;
  --btn-primary-text: #ffffff;
  --danger: #ff8f8f;
  background:
    radial-gradient(72rem 42rem at 4% -9%, rgba(113, 126, 148, 0.18), transparent 58%),
    radial-gradient(64rem 38rem at 100% -12%, rgba(81, 92, 110, 0.22), transparent 62%),
    linear-gradient(180deg, #0b1118 0%, #0c141e 100%);
}

.dashboard-panel {
  background: var(--panel-bg);
  border: 1px solid var(--border-soft);
  box-shadow: var(--panel-shadow);
}

.app-breadcrumb-nav {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  justify-content: flex-start;
  text-align: left;
  min-width: 0;
  font-weight: 700;
  font-size: 1.25rem;
  line-height: 1.2;
}

@media (min-width: 640px) {
  .app-breadcrumb-nav {
    font-size: 1.5rem;
  }
}

.app-breadcrumb-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--heading);
  transition: color 0.2s ease;
  flex-shrink: 0;
}

.app-breadcrumb-link:hover {
  color: var(--link-hover);
}

.app-breadcrumb-divider {
  color: var(--text-muted);
}

.app-breadcrumb-current {
  color: var(--heading);
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.dashboard-reading {
  font-size: 1.04rem;
  line-height: 1.94;
  letter-spacing: 0.01em;
  color: var(--text-main);
}

.markdown-body {
  color: var(--text-main);
  font-size: 1.03rem;
  line-height: 1.92;
  letter-spacing: 0.01em;
  word-break: break-word;
  overflow-wrap: anywhere;
}

.markdown-body h1 {
  margin: 1.8rem 0 1rem;
  color: var(--heading);
  font-weight: 700;
  font-size: clamp(1.6rem, 1.15rem + 1.3vw, 2.1rem);
  line-height: 1.26;
  letter-spacing: 0.01em;
}

.markdown-body h2 {
  margin: 1.5rem 0 0.9rem;
  color: var(--heading);
  font-weight: 700;
  font-size: clamp(1.26rem, 0.95rem + 0.85vw, 1.65rem);
  line-height: 1.34;
}

.markdown-body h3 {
  margin: 1.2rem 0 0.75rem;
  color: var(--heading-soft);
  font-weight: 600;
  font-size: clamp(1.06rem, 0.9rem + 0.52vw, 1.24rem);
  line-height: 1.42;
}

.markdown-body h4 {
  margin: 1rem 0 0.6rem;
  color: var(--heading-soft);
  font-size: 1rem;
  font-weight: 600;
  line-height: 1.5;
}

.markdown-body p {
  margin-bottom: 0.92rem;
  color: var(--text-main);
}

.markdown-body ul {
  margin: 0 0 1rem;
  padding-left: 1.6rem;
  list-style: disc;
}

.markdown-body ol {
  margin: 0 0 1rem;
  padding-left: 1.6rem;
  list-style: decimal;
}

.markdown-body li {
  margin-bottom: 0.56rem;
  color: var(--text-main);
  line-height: 1.84;
}

.markdown-body li::marker {
  color: var(--accent);
}

.markdown-body a {
  color: var(--link);
  text-underline-offset: 3px;
  text-decoration-thickness: 1.2px;
}

.markdown-body a:hover {
  color: var(--link-hover);
  text-decoration: underline;
}

.markdown-body strong {
  color: #234f41;
  font-weight: 600;
}

.markdown-body .markdown-timestamp-strong {
  color: var(--accent-strong);
}

.dashboard-shell[data-theme='dark'] .markdown-body strong,
.dashboard-shell[data-theme='dark'] .qa-markdown strong {
  color: #eaf2ff;
  font-weight: 600;
}

.dashboard-shell[data-theme='dark'] .markdown-body .markdown-timestamp-strong,
.dashboard-shell[data-theme='dark'] .qa-markdown .markdown-timestamp-strong {
  color: #8fcdb8;
}

.markdown-body blockquote {
  margin: 1.2rem 0;
  border-left: 4px solid var(--quote-border);
  padding: 0.3rem 0 0.3rem 1rem;
  color: var(--text-secondary);
  background: var(--quote-bg);
}

.markdown-body pre {
  margin: 1.2rem 0;
  border-radius: 0.9rem;
  border: 1px solid var(--pre-border);
  background: var(--pre-bg);
  padding: 0.95rem 1rem;
  overflow-x: auto;
  white-space: pre-wrap;
  word-break: break-word;
  line-height: 1.72;
  color: var(--pre-text);
}

.markdown-body code {
  border: 1px solid var(--code-border);
  border-radius: 0.42rem;
  background: var(--code-bg);
  padding: 0.08rem 0.35rem;
  color: var(--code-text);
  font-size: 0.95em;
}

.markdown-body pre code {
  border: 0;
  background: transparent;
  padding: 0;
  color: var(--pre-text);
}

.markdown-body table {
  margin: 1.2rem 0;
  width: 100%;
  border-collapse: collapse;
  border-radius: 0.7rem;
  overflow: hidden;
}

.markdown-body th,
.markdown-body td {
  border: 1px solid var(--table-border);
  padding: 0.65rem 0.72rem;
  vertical-align: top;
}

.markdown-body th {
  background: var(--table-head-bg);
  color: var(--text-main);
}

.streaming-content {
  display: block;
  min-height: 220px;
  max-height: min(74vh, 940px);
  overflow-x: hidden;
  overflow-y: auto;
  padding-right: 8px;
  scroll-behavior: smooth;
  scrollbar-gutter: stable;
  overscroll-behavior: contain;
  touch-action: pan-y;
  -webkit-overflow-scrolling: touch;
  font-size: 1.01rem;
  line-height: 1.86;
  letter-spacing: 0.01em;
}

.streaming-content::-webkit-scrollbar {
  width: 8px;
}

.streaming-content::-webkit-scrollbar-track {
  background: var(--scroll-track);
  border-radius: 999px;
}

.streaming-content::-webkit-scrollbar-thumb {
  background: var(--scroll-thumb);
  border-radius: 999px;
}

.streaming-content::-webkit-scrollbar-thumb:hover {
  background: var(--scroll-thumb-hover);
}

.streaming-content p,
.streaming-content li {
  margin-bottom: 0.88rem;
}

.streaming-plain {
  margin: 0;
  color: var(--text-main);
  font-size: 1.01rem;
  line-height: 1.86;
  letter-spacing: 0.01em;
  white-space: pre-wrap;
  word-break: break-word;
  overflow-wrap: anywhere;
  font-family: var(--font-geist-sans), "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Noto Sans CJK SC", sans-serif;
}

.qa-markdown {
  font-size: 0.91rem;
  line-height: 1.64;
  color: var(--text-main);
}

.qa-markdown p {
  margin: 0;
}

.qa-markdown p + p {
  margin-top: 0.46rem;
}

.qa-markdown ul,
.qa-markdown ol {
  margin: 0.42rem 0 0 1rem;
}

.qa-markdown li {
  margin-bottom: 0.16rem;
}

.qa-markdown a {
  color: #2f6656;
}

.mindmap-canvas .react-flow {
  background:
    radial-gradient(44rem 28rem at 8% 0%, rgba(198, 176, 136, 0.14), transparent 65%),
    radial-gradient(44rem 28rem at 100% 0%, rgba(126, 158, 144, 0.14), transparent 65%),
    #fbf8f1;
}

.mindmap-canvas .react-flow__controls-button {
  color: var(--text-main);
}

.mindmap-canvas .react-flow__edge path {
  transition: stroke 0.2s ease;
}

.dashboard-shell[data-theme='dark'] .mindmap-canvas .react-flow {
  background:
    radial-gradient(46rem 30rem at 8% 0%, rgba(104, 123, 151, 0.18), transparent 65%),
    radial-gradient(46rem 30rem at 100% 0%, rgba(82, 99, 123, 0.2), transparent 65%),
    #121922;
}

.dashboard-shell[data-theme='dark'] .mindmap-canvas .react-flow__controls-button {
  color: #f4f6fa;
  background: #1a2330;
  border-color: #3a4657;
}

@media (max-width: 640px) {
  .dashboard-reading {
    font-size: 0.98rem;
    line-height: 1.82;
    letter-spacing: 0.01em;
  }

  .markdown-body {
    font-size: 0.97rem;
    line-height: 1.8;
  }

  .markdown-body h1 {
    font-size: 1.42rem;
    line-height: 1.3;
  }

  .markdown-body h2 {
    font-size: 1.21rem;
    line-height: 1.35;
  }

  .markdown-body h3 {
    font-size: 1.05rem;
    line-height: 1.42;
  }

  .streaming-content {
    min-height: 160px;
    max-height: min(67vh, 700px);
    font-size: 0.95rem;
    line-height: 1.72;
    padding-right: 4px;
  }

  .streaming-plain {
    font-size: 0.95rem;
    line-height: 1.72;
  }
}
